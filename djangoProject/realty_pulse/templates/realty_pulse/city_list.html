{% extends 'realty_pulse/base.html' %}

{% block title %}City Listings{% endblock %}

{% block content %}
        <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bootstrap Navbar</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- Bootstrap JS (for dropdowns and toggler) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>



<div class="container">
    <h2>Search Cities</h2>

    <!-- Prediction Form -->
    <form method="get">
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Show results for the prediction -->
    {% if cities %}
    <h3>Prediction Results</h3>
    <ul>
        {% for city in cities %}
        <li>
            <!-- Use city.id to link to the CityDetailView -->
            <a href="{% url 'realty_pulse:city_detail' pk=city.id %}"><strong>{{ city.city }}</strong></a> in {{ city.year }}:
            <ul>
                <li>Predicted Income: {{ city.income }}</li>
                <li>Predicted Median Age: {{ city.predicted_mean_age }}</li>
                <li>Predicted Unemployment: {{ city.predicted_unemployment }}</li>
                <li>Migration Cost Index: {{ city.predicted_truck_cost}} </li>
                <li>Predicted Geomobility: {{ city.predicted_geomobility }}</li>
                <li>Predicted Housing Price: {{ city.predicted_housing_price }}</li>
                <li>Return on Investment (ROI): {{ city.roi }}</li>
            </ul>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No cities found matching the criteria.</p>
    {% endif %}
</div>
{% endblock %}
