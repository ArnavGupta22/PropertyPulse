{% extends 'realty_pulse/base.html' %}

{% block title %}City Listings{% endblock %}

{% block content %}
<div class="container">
    <h2>Search Cities</h2>

    <!-- Prediction Form -->
    <form method="get">
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Show results for the prediction -->
    {% if cities %}
    <h3>Prediction Results</h3>
    <ul>
        {% for city in cities %}
        <li>
            <!-- Use city.id to link to the CityDetailView -->
            <a href="{% url 'realty_pulse:city_detail' pk=city.id %}"><strong>{{ city.city }}</strong></a> in {{ city.year }}:
            <ul>
                <li>Predicted Income: {{ city.income }}</li>
                <li>Predicted Median Age: {{ city.predicted_mean_age }}</li>
                <li>Predicted Unemployment: {{ city.predicted_unemployment }}</li>
                <li>Migration Cost Index: {{ city.predicted_truck_cost}} </li>
                <li>Predicted Geomobility: {{ city.predicted_geomobility }}</li>
                <li>Predicted Housing Price: {{ city.predicted_housing_price }}</li>
                <li>Return on Investment (ROI): {{ city.roi }}</li>
            </ul>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No cities found matching the criteria.</p>
    {% endif %}
</div>
{% endblock %}
